<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Survey Form | SJCB Household Profiling</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>

  <body class="d-flex flex-column min-vh-100 bg-light">
    <nav class="navbar shadow-sm py-3" style="background-color: #457507">
      <div class="container-fluid px-4">
        <a
          class="navbar-brand text-white fw-bold d-flex align-items-center"
          href="#"
        >
          <img
            src="/images/logo.jpg"
            width="45"
            height="45"
            class="rounded-circle me-2"
          />
          Archdiocese of Tuguegarao
        </a>
      </div>
    </nav>

    <main class="flex-fill py-4">
      <div class="container">
        <div class="progress mb-4" style="height: 25px;">
          <div class="progress-bar bg-success" role="progressbar" style="width: 100%;">Step 4 of 4</div>
        </div>
        <h4 class="text-center fw-bold mb-4">
          SOCIO-ECONOMIC AND INFRASTRUCTURE
        </h4>

        <form action="submit_handler.php" method="POST">
          <div class="card shadow-sm mb-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="income" class="form-label"
                    >Income per Month</label
                  >
                  <select class="form-select" id="income" name="income_monthly">
                    <option value="">Select</option>
                    <option value="1">₱3,000 and below</option>
                    <option value="2">₱3,001 – ₱6,000</option>
                    <option value="3">₱6,001 – ₱9,000</option>
                    <option value="4">₱9,001 – ₱12,000</option>
                    <option value="5">₱12,001 – ₱15,000</option>
                    <option value="6">₱15,001 – ₱18,000</option>
                    <option value="7">₱18,001 – ₱21,000</option>
                    <option value="8">₱21,001 – ₱24,000</option>
                    <option value="9">₱24,001 – ₱27,000</option>
                    <option value="10">₱27,001 – ₱30,000</option>
                    <option value="11">₱30,001 and up</option>
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="expenses" class="form-label"
                    >Expenses per Week</label
                  >
                  <select
                    class="form-select"
                    id="expenses"
                    name="expenses_weekly"
                  >
                    <option value="1">₱300 and below</option>
                    <option value="2">₱301 – ₱600</option>
                    <option value="3">₱601 – ₱900</option>
                    <option value="4">₱901 – ₱1,200</option>
                    <option value="5">₱1,201 – ₱1,500</option>
                    <option value="6">₱1,501 – ₱1,800</option>
                    <option value="7">₱1,801 – ₱2,100</option>
                    <option value="8">₱2,101 – ₱2,400</option>
                    <option value="9">₱2,401 – ₱2,700</option>
                    <option value="10">₱2,701 – ₱3,000</option>
                    <option value="11">₱3,001 and up</option>
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="savings" class="form-label"
                    >Do you have savings?</label
                  >
                  <select class="form-select" id="savings" name="has_savings">
                    <option value="1">Yes</option>
                    <option value="2">None</option>
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="savings_loc" class="form-label"
                    >Where do you put your savings?</label
                  >
                  <select
                    class="form-select"
                    id="savings_loc"
                    name="savings_location"
                  >
                    <option value="1">House</option>
                    <option value="2">Bank</option>
                    <option value="3">E-money (GCash, etc.)</option>
                    <option value="4">Microfinance / ASA</option>
                    <option value="99">Others</option>
                    <option value="66">Not Applicable</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="card shadow-sm mb-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="ownership" class="form-label"
                    >Ownership of House/Lot</label
                  >
                  <select
                    class="form-select"
                    id="ownership"
                    name="house_ownership"
                  >
                    <option value="1">Owned</option>
                    <option value="2">Rented House</option>
                    <option value="3">Tenanted</option>
                    <option value="4">Rent Free</option>
                    <option value="5">Caretaker</option>
                    <option value="99">Others</option>
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="house_class" class="form-label"
                    >House Classification</label
                  >
                  <select
                    class="form-select"
                    id="house_class"
                    name="house_classification"
                  >
                    <option value="1">Concrete</option>
                    <option value="2">Semi-Concrete</option>
                    <option value="3">Indigenous Materials</option>
                    <option value="4">Galvanized Iron / Aluminum</option>
                    <option value="5">Barong-barong</option>
                    <option value="6">Makeshift</option>
                    <option value="99">Others</option>
                  </select>
                </div>

                <div class="col-md-4">
                  <label for="land_area" class="form-label"
                    >Land Area (hectares)</label
                  >
                  <input
                    type="number"
                    step="0.01"
                    id="land_area"
                    name="land_area"
                    class="form-control"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="card shadow-sm mb-4">
            <div class="card-body">
              <label class="form-label fw-bold"
                >Appliances / Vehicle Owned</label
              >
              <div class="row">
                <div class="col-md-4">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="refrigerator"
                      id="asset1"
                    />
                    <label for="asset1">Refrigerator</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="stove"
                      id="asset2"
                    />
                    <label for="asset2">Stove</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="rice_cooker"
                      id="asset3"
                    />
                    <label for="asset3">Rice Cooker</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="electric_fan"
                      id="asset4"
                    />
                    <label for="asset4">Electric Fan</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="washing_machine"
                      id="asset5"
                    />
                    <label for="asset5">Washing Machine</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="aircon"
                      id="asset6"
                    />
                    <label for="asset6">Aircon</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="tv"
                      id="asset7"
                    />
                    <label for="asset7">Television</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="phone"
                      id="asset8"
                    />
                    <label for="asset8">Mobile Phone</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="computer"
                      id="asset9"
                    />
                    <label for="asset9">Computer/Laptop</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="assets[]"
                      value="vehicle"
                      id="asset10"
                    />
                    <label for="asset10">Car/Vehicle</label>
                  </div>
                   <div class="form-check">
                     <input
                       class="form-check-input"
                       type="checkbox"
                       name="assets[]"
                       value="others"
                       id="asset11"
                     />
                     <label for="asset11">Others</label>
                   </div>
                   <div class="mt-2">
                     <input type="text" class="form-control form-control-sm" name="assets_others" placeholder="Please specify other assets" />
                   </div>
                </div>
              </div>
            </div>
          </div>

          <div class="card shadow-sm mb-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Livestock Owned (Check all that apply)</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="carabao" id="livestock_carabao">
                    <label class="form-check-label" for="livestock_carabao">Carabao</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="cow" id="livestock_cow">
                    <label class="form-check-label" for="livestock_cow">Cow</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="goat" id="livestock_goat">
                    <label class="form-check-label" for="livestock_goat">Goat</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="chicken" id="livestock_chicken">
                    <label class="form-check-label" for="livestock_chicken">Chicken</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="pig" id="livestock_pig">
                    <label class="form-check-label" for="livestock_pig">Pig</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="duck" id="livestock_duck">
                    <label class="form-check-label" for="livestock_duck">Duck</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="sheep" id="livestock_sheep">
                    <label class="form-check-label" for="livestock_sheep">Sheep</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="rabbit" id="livestock_rabbit">
                    <label class="form-check-label" for="livestock_rabbit">Rabbit</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_owned[]" value="others" id="livestock_others_owned" onchange="toggleOthersText(this, 'livestock_owned_others_text')">
                    <label class="form-check-label" for="livestock_others_owned">Others</label>
                  </div>
                  <div class="mt-2 d-none" id="livestock_owned_others_text">
                    <input type="text" class="form-control form-control-sm" name="livestock_owned_others_text" placeholder="Please specify other livestock...">
                  </div>
                </div>

                <div class="col-md-6">
                  <label class="form-label">Livestock Raised for Others (Check all that apply)</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="carabao" id="livestock_others_carabao">
                    <label class="form-check-label" for="livestock_others_carabao">Carabao</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="cow" id="livestock_others_cow">
                    <label class="form-check-label" for="livestock_others_cow">Cow</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="goat" id="livestock_others_goat">
                    <label class="form-check-label" for="livestock_others_goat">Goat</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="chicken" id="livestock_others_chicken">
                    <label class="form-check-label" for="livestock_others_chicken">Chicken</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="pig" id="livestock_others_pig">
                    <label class="form-check-label" for="livestock_others_pig">Pig</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="duck" id="livestock_others_duck">
                    <label class="form-check-label" for="livestock_others_duck">Duck</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="sheep" id="livestock_others_sheep">
                    <label class="form-check-label" for="livestock_others_sheep">Sheep</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="rabbit" id="livestock_others_rabbit">
                    <label class="form-check-label" for="livestock_others_rabbit">Rabbit</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="livestock_for_others[]" value="others" id="livestock_others_checkbox" onchange="toggleOthersText(this, 'livestock_others_text')">
                    <label class="form-check-label" for="livestock_others_checkbox">Others</label>
                  </div>
                  <div class="mt-2 d-none" id="livestock_others_text">
                    <input type="text" class="form-control form-control-sm" name="livestock_for_others_text" placeholder="Please specify other livestock...">
                  </div>
                </div>
              </div>

              <hr class="my-4">

              <div class="row g-3">
                <div class="col-12">
                  <label class="form-label fw-bold">Farm/Fishing Equipments Owned (Check all that apply)</label>
                  <div class="row">
                    <div class="col-md-4">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="1" id="equip_1">
                        <label class="form-check-label" for="equip_1">1- Hand tractor</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="2" id="equip_2">
                        <label class="form-check-label" for="equip_2">2- Big tractor</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="3" id="equip_3">
                        <label class="form-check-label" for="equip_3">3- Turtle/Mudboat</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="4" id="equip_4">
                        <label class="form-check-label" for="equip_4">4- Tiller/Araro</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="5" id="equip_5">
                        <label class="form-check-label" for="equip_5">5- Suyod</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="6" id="equip_6">
                        <label class="form-check-label" for="equip_6">6- Harrow/Kalmot</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="7" id="equip_7">
                        <label class="form-check-label" for="equip_7">7- Rice Mill</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="8" id="equip_8">
                        <label class="form-check-label" for="equip_8">8- Harvester</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="9" id="equip_9">
                        <label class="form-check-label" for="equip_9">9- Irrigation Pump</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="10" id="equip_10">
                        <label class="form-check-label" for="equip_10">10- Bagnets</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="11" id="equip_11">
                        <label class="form-check-label" for="equip_11">11- Sift net</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="12" id="equip_12">
                        <label class="form-check-label" for="equip_12">12- Balimbing/pison</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="13" id="equip_13">
                        <label class="form-check-label" for="equip_13">13- Sprayer</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="14" id="equip_14">
                        <label class="form-check-label" for="equip_14">14- Thresher</label>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="15" id="equip_15">
                        <label class="form-check-label" for="equip_15">15- Motorized banca</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="16" id="equip_16">
                        <label class="form-check-label" for="equip_16">16- Banca</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="17" id="equip_17">
                        <label class="form-check-label" for="equip_17">17- Fishnet</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="18" id="equip_18">
                        <label class="form-check-label" for="equip_18">18- Hook & Lines</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="19" id="equip_19">
                        <label class="form-check-label" for="equip_19">19- Fish Cages</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="20" id="equip_20">
                        <label class="form-check-label" for="equip_20">20- Salambao/Fish Traps</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="21" id="equip_21">
                        <label class="form-check-label" for="equip_21">21- Gill nets</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="farm_equipments[]" value="99" id="equip_99" onchange="toggleOthersText(this, 'farm_equipments_others_text')">
                        <label class="form-check-label" for="equip_99">99- Others</label>
                      </div>
                      <div class="mt-2 d-none" id="farm_equipments_others_text">
                        <input type="text" class="form-control form-control-sm" name="farm_equipments_others_text" placeholder="Please specify other equipment...">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="card shadow-sm mb-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="dist_church" class="form-label"
                    >Distance from Church</label
                  >
                  <select
                    class="form-select"
                    id="dist_church"
                    name="distance_church"
                  >
                    <option value="1">Walking Distance (Ideal)</option>
                    <option value="2">5–15 Minute Drive</option>
                    <option value="3">30-Minute Drive</option>
                    <option value="4">Over 45 Minutes – 1 Hour+</option>
                  </select>
                </div>

                <div class="col-md-6">
                  <label for="dist_market" class="form-label"
                    >Distance from Market</label
                  >
                  <select
                    class="form-select"
                    id="dist_market"
                    name="distance_market"
                  >
                    <option value="1">Walking Distance (Ideal)</option>
                    <option value="2">5–15 Minute Drive</option>
                    <option value="3">30-Minute Drive</option>
                    <option value="4">Over 45 Minutes – 1 Hour+</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="row g-3 mb-4">
            <div class="col-md-6">
              <label for="companion" class="form-label"
                >Name of Missionary Companion</label
              >
              <input
                type="text"
                id="companion"
                name="missionary_companion"
                class="form-control"
              />
            </div>
            <div class="col-md-6">
              <label for="date" class="form-label">Date of Listing</label>
              <input
                type="date"
                id="date"
                name="listing_date"
                class="form-control"
              />
            </div>
          </div>

          <div class="text-center mb-5">
            <button
              type="button"
              onclick="goPrev()"
              class="btn btn-secondary me-2"
            >
              Previous
            </button>
            <button
              type="button"
              onclick="submitSurvey()"
              class="btn btn-success px-5 fw-semibold shadow-sm"
            >
              Review & Submit
            </button>
          </div>

          <input type="hidden" name="form_source" value="socio_economic_and_infrastructure">
        </form>
      </div>
    </main>

    <footer class="bg-dark text-white mt-auto">
      <div class="container py-2">
        <div class="row align-items-center">
          <div class="col-md-9">
            <h6 class="fw-bold mb-0">Household Survey Profiling</h6>
            <p class="small mb-0" style="font-size: 0.75rem">SJCB BSIT-2 Project</p>
          </div>
          <div class="col-md-3 text-md-end">
            <small class="fw-bold d-block d-md-inline me-2">Follow Us:</small>
            <a href="https://www.facebook.com/sjcbiofficial" class="text-white me-2"><i class="bi bi-facebook"></i></a>
          </div>
        </div>
      </div>
      <div class="text-center py-1 bg-church" style="font-size: 0.8rem">
        © 2026 SJCB BSIT-2 | All Rights Reserved
      </div>
    </footer>

    <script src="/javascripts/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function saveFormData() {
        const form = document.querySelector('form');
        const formData = new FormData(form);
        const data = {};
        for (let [key, value] of formData.entries()) {
          if (key === 'assets[]') {
            if (!data.assets) data.assets = [];
            data.assets.push(value);
          } else {
            data[key] = value;
          }
        }
        sessionStorage.setItem('survey_socio', JSON.stringify(data));
      }

      function loadSavedData() {
        const saved = JSON.parse(sessionStorage.getItem('survey_socio') || '{}');
        for (let key in saved) {
          if (key === 'assets' && Array.isArray(saved[key])) {
            saved[key].forEach(val => {
              const el = document.querySelector(`[name="assets[]"][value="${val}"]`);
              if (el) el.checked = true;
            });
          } else {
            const el = document.querySelector(`[name="${key}"]`);
            if (el) el.value = saved[key];
          }
        }
      }

      function goPrev() {
        saveFormData();
        window.location.href = 'survey4.html';
      }

      function submitSurvey() {
        saveFormData();
        window.location.href = 'final.html';
      }

      window.onload = loadSavedData;
    </script>
  </body>
</html>
